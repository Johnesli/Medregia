from django.contrib.auth.models import User
from django.contrib.auth import get_user_model
from django.http import JsonResponse
from .models import Person,CustomUser


DISTRICT_CODES = {
    "Nicobar": "001",
    "North and Middle Andaman": "002",
    "South Andaman": "003",
    "Srikakulam": "001",
    "Vizianagaram": "002",
    "Visakhapatnam": "003",
    "East Godavari": "004",
    "West Godavari": "005",
    "Krishna": "006",
    "Guntur": "007",
    "Prakasam": "008",
    "Nellore": "009",
    "Chittoor": "010",
    "YSR Kadapa": "011",
    "Anantapur": "012",
    "Kurnool": "013",
    "Tawang": "001",
    "West Kameng": "002",
    "East Kameng": "003",
    "Papum Pare": "004",
    "Kurung Kumey": "005",
    "Kra Daadi": "006",
    "Lower Subansiri": "007",
    "Upper Subansiri": "008",
    "West Siang": "009",
    "East Siang": "010",
    "Siang": "011",
    "Upper Siang": "012",
    "Lower Siang": "013",
    "Lower Dibang Valley": "014",
    "Dibang Valley": "015",
    "Anjaw": "016",
    "Lohit": "017",
    "Namsai": "018",
    "Changlang": "019",
    "Tirap": "020",
    "Longding": "021",
    "Baksa": "025",
    "Barpeta": "026",
    "Bongaigaon": "027",
    "Cachar": "028",
    "Chirang": "029",
    "Darrang": "030",
    "Dhemaji": "031",
    "Dhubri": "032",
    "Dibrugarh": "033",
    "Goalpara": "034",
    "Golaghat": "035",
    "Hailakandi": "036",
    "Jorhat": "037",
    "Kamrup Metro": "038",
    "Kamrup Rural": "039",
    "Karbi Anglong": "040",
    "Karimganj": "041",
    "Kokrajhar": "042",
    "Lakhimpur": "043",
    "Morigaon": "044",
    "Nagaon": "045",
    "Nalbari": "046",
    "Sivasagar": "047",
    "Sonitpur": "048",
    "Tinsukia": "049",
    "Udalguri": "050",
    "Araria": "001",
    "Arwal": "002",
    "Aurangabad": "003",
    "Banka": "004",
    "Begusarai": "005",
    "Bhagalpur": "006",
    "Bhojpur": "007",
    "Buxar": "008",
    "Darbhanga": "009",
    "East Champaran": "010",
    "Gaya": "011",
    "Gopalganj": "012",
    "Jamui": "013",
    "Jehanabad": "014",
    "Kaimur": "015",
    "Katihar": "016",
    "Khagaria": "017",
    "Kishanganj": "018",
    "Lakhisarai": "019",
    "Madhepura": "020",
    "Madhubani": "021",
    "Munger": "022",
    "Muzaffarpur": "023",
    "Nalanda": "024",
    "Nawada": "025",
    "Patna": "026",
    "Purnia": "027",
    "Rohtas": "028",
    "Saharsa": "029",
    "Samastipur": "030",
    "Saran": "031",
    "Sheikhpura": "032",
    "Sheohar": "033",
    "Sitamarhi": "034",
    "Siwan": "035",
    "Supaul": "036",
    "Vaishali": "037",
    "West Champaran": "038",
    "Chandigarh": "001",
    "Balod": "001",
    "Baloda Bazar": "002",
    "Balrampur": "003",
    "Bastar": "004",
    "Bemetara": "005",
    "Bijapur": "006",
    "Bilaspur": "007",
    "Dantewada": "008",
    "Dhamtari": "009",
    "Durg": "010",
    "Gariaband": "011",
    "Janjgir-Champa": "012",
    "Jashpur": "013",
    "Kanker": "014",
    "Kawardha": "015",
    "Kondagaon": "016",
    "Korba": "017",
    "Korea": "018",
    "Mahasamund": "019",
    "Mungeli": "020",
    "Narayanpur": "021",
    "Raigarh": "022",
    "Raipur": "023",
    "Rajnandgaon": "024",
    "Sukma": "025",
    "Surajpur": "026",
    "Surguja": "027",
    "Dadra and Nagar Haveli": "001",
    "Daman and Diu": "001",
    "Central Delhi": "001",
    "East Delhi": "002",
    "New Delhi": "003",
    "North Delhi": "004",
    "North East Delhi": "005",
    "North West Delhi": "006",
    "South Delhi": "007",
    "South East Delhi": "008",
    "South West Delhi": "009",
    "West Delhi": "010",
    "North Goa": "001",
    "South Goa": "002",
    "Ahmedabad": "001",
    "Amreli": "002",
    "Anand": "003",
    "Aravalli": "004",
    "Banaskantha": "005",
    "Bharuch": "006",
    "Bhavnagar": "007",
    "Botad": "008",
    "Chhota Udaipur": "009",
    "Dahod": "010",
    "Dang": "011",
    "Devbhoomi Dwarka": "012",
    "Gandhinagar": "013",
    "Gir Somnath": "014",
    "Jamnagar": "015",
    "Junagadh": "016",
    "Kutch": "017",
    "Kheda": "018",
    "Mahisagar": "019",
    "Mehsana": "020",
    "Morbi": "021",
    "Narmada": "022",
    "Navsari": "023",
    "Panchmahal": "024",
    "Patan": "025",
    "Porbandar": "026",
    "Rajkot": "027",
    "Sabarkantha": "028",
    "Surat": "029",
    "Surendranagar": "030",
    "Tapi": "031",
    "Vadodara": "032",
    "Valsad": "033",
    "Ambala": "001",
    "Bhiwani": "002",
    "Charkhi Dadri": "003",
    "Faridabad": "004",
    "Fatehabad": "005",
    "Gurugram": "006",
    "Hisar": "007",
    "Jhajjar": "008",
    "Jind": "009",
    "Kaithal": "010",
    "Karnal": "011",
    "Kurukshetra": "012",
    "Mahendragarh": "013",
    "Nuh": "014",
    "Palwal": "015",
    "Panchkula": "016",
    "Panipat": "017",
    "Rewari": "018",
    "Rohtak": "019",
    "Sirsa": "020",
    "Sonipat": "021",
    "Yamunanagar": "022",
    "Bilaspur": "001",
    "Chamba": "002",
    "Hamirpur": "003",
    "Kangra": "004",
    "Kinnaur": "005",
    "Kullu": "006",
    "Lahaul and Spiti": "007",
    "Mandi": "008",
    "Shimla": "009",
    "Sirmaur": "010",
    "Solan": "011",
    "Una": "012",
    "Anantnag": "001",
    "Bandipora": "002",
    "Baramulla": "003",
    "Budgam": "004",
    "Doda": "005",
    "Ganderbal": "006",
    "Jammu": "007",
    "Kathua": "008",
    "Kishtwar": "009",
    "Kulgam": "010",
    "Kupwara": "011",
    "Poonch": "012",
    "Pulwama": "013",
    "Rajouri": "014",
    "Ramban": "015",
    "Reasi": "016",
    "Samba": "017",
    "Shopian": "018",
    "Srinagar": "019",
    "Udhampur": "020",
    "Bokaro": "001",
    "Chatra": "002",
    "Deoghar": "003",
    "Dhanbad": "004",
    "Dumka": "005",
    "East Singhbhum": "006",
    "Garhwa": "007",
    "Giridih": "008",
    "Godda": "009",
    "Gumla": "010",
    "Hazaribagh": "011",
    "Jamtara": "012",
    "Khunti": "013",
    "Koderma": "014",
    "Latehar": "015",
    "Lohardaga": "016",
    "Pakur": "017",
    "Palamu": "018",
    "Ramgarh": "019",
    "Ranchi": "020",
    "Sahebganj": "021",
    "Seraikela-Kharsawan": "022",
    "Simdega": "023",
    "West Singhbhum": "024",
    "Bagalkot": "001",
    "Ballari": "002",
    "Belagavi": "003",
    "Bengaluru Rural": "004",
    "Bengaluru Urban": "005",
    "Bidar": "006",
    "Chamarajanagar": "007",
    "Chikballapur": "008",
    "Chikkamagaluru": "009",
    "Chitradurga": "010",
    "Dakshina Kannada": "011",
    "Davanagere": "012",
    "Dharwad": "013",
    "Gadag": "014",
    "Hassan": "015",
    "Haveri": "016",
    "Kalaburagi": "017",
    "Kodagu": "018",
    "Kolar": "019",
    "Koppal": "020",
    "Mandya": "021",
    "Mysuru": "022",
    "Raichur": "023",
    "Ramanagara": "024",
    "Shivamogga": "025",
    "Tumakuru": "026",
    "Udupi": "027",
    "Uttara Kannada": "028",
    "Vijayapura": "029",
    "Yadgir": "030",
    "Alappuzha": "001",
    "Ernakulam": "002",
    "Idukki": "003",
    "Kannur": "004",
    "Kasaragod": "005",
    "Kollam": "006",
    "Kottayam": "007",
    "Kozhikode": "008",
    "Malappuram": "009",
    "Palakkad": "010",
    "Pathanamthitta": "011",
    "Thiruvananthapuram": "012",
    "Thrissur": "013",
    "Wayanad": "014",
    "Ladakh": "001",
    "Lakshadweep": "001",
    "Agar Malwa": "001",
    "Alirajpur": "002",
    "Anuppur": "003",
    "Ashoknagar": "004",
    "Balaghat": "005",
    "Barwani": "006",
    "Betul": "007",
    "Bhind": "008",
    "Bhopal": "009",
    "Burhanpur": "010",
    "Chhatarpur": "011",
    "Chhindwara": "012",
    "Damoh": "013",
    "Datia": "014",
    "Dewas": "015",
    "Dhar": "016",
    "Dindori": "017",
    "Guna": "018",
    "Gwalior": "019",
    "Harda": "020",
    "Hoshangabad": "021",
    "Indore": "022",
    "Jabalpur": "023",
    "Jhabua": "024",
    "Katni": "025",
    "Khandwa": "026",
    "Khargone": "027",
    "Mandla": "028",
    "Mandsaur": "029",
    "Morena": "030",
    "Narsinghpur": "031",
    "Neemuch": "032",
    "Panna": "033",
    "Raisen": "034",
    "Rajgarh": "035",
    "Ratlam": "036",
    "Rewa": "037",
    "Sagar": "038",
    "Satna": "039",
    "Sehore": "040",
    "Seoni": "041",
    "Shahdol": "042",
    "Shajapur": "043",
    "Sheopur": "044",
    "Shivpuri": "045",
    "Sidhi": "046",
    "Singrauli": "047",
    "Tikamgarh": "048",
    "Ujjain": "049",
    "Umaria": "050",
    "Vidisha": "051",
    "Ahmednagar": "001",
    "Akola": "002",
    "Amravati": "003",
    "Aurangabad": "004",
    "Beed": "005",
    "Bhandara": "006",
    "Buldhana": "007",
    "Chandrapur": "008",
    "Dhule": "009",
    "Gadchiroli": "010",
    "Gondia": "011",
    "Hingoli": "012",
    "Jalgaon": "013",
    "Jalna": "014",
    "Kolhapur": "015",
    "Latur": "016",
    "Mumbai City": "017",
    "Mumbai Suburban": "018",
    "Nagpur": "019",
    "Nanded": "020",
    "Nandurbar": "021",
    "Nashik": "022",
    "Osmanabad": "023",
    "Palghar": "024",
    "Parbhani": "025",
    "Pune": "026",
    "Raigad": "027",
    "Ratnagiri": "028",
    "Sangli": "029",
    "Satara": "030",
    "Sindhudurg": "031",
    "Solapur": "032",
    "Thane": "033",
    "Wardha": "034",
    "Washim": "035",
    "Yavatmal": "036",
    "Bishnupur": "001",
    "Chandel": "002",
    "Churachandpur": "003",
    "Imphal East": "004",
    "Imphal West": "005",
    "Jiribam": "006",
    "Kakching": "007",
    "Kamjong": "008",
    "Kangpokpi": "009",
    "Noney": "010",
    "Pherzawl": "011",
    "Senapati": "012",
    "Tamenglong": "013",
    "Tengnoupal": "014",
    "Thoubal": "015",
    "Ukhrul": "016",
    "East Garo Hills": "001",
    "East Jaintia Hills": "002",
    "East Khasi Hills": "003",
    "North Garo Hills": "004",
    "Ribhoi": "005",
    "South Garo Hills": "006",
    "South West Garo Hills": "007",
    "South West Khasi Hills": "008",
    "West Garo Hills": "009",
    "West Jaintia Hills": "010",
    "West Khasi Hills": "011",
    "Aizawl": "001",
    "Champhai": "002",
    "Kolasib": "003",
    "Lawngtlai": "004",
    "Lunglei": "005",
    "Mamit": "006",
    "Saiha": "007",
    "Serchhip": "008",
    "Dimapur": "001",
    "Kiphire": "002",
    "Kohima": "003",
    "Longleng": "004",
    "Mokokchung": "005",
    "Mon": "006",
    "Peren": "007",
    "Phek": "008",
    "Tuensang": "009",
    "Wokha": "010",
    "Zunheboto": "011",
    "Angul": "001",
    "Balangir": "002",
    "Balasore": "003",
    "Bargarh": "004",
    "Bhadrak": "005",
    "Boudh": "006",
    "Cuttack": "007",
    "Deogarh": "008",
    "Dhenkanal": "009",
    "Gajapati": "010",
    "Ganjam": "011",
    "Jagatsinghpur": "012",
    "Jajpur": "013",
    "Jharsuguda": "014",
    "Kalahandi": "015",
    "Kandhamal": "016",
    "Kendrapara": "017",
    "Kendujhar": "018",
    "Khordha": "019",
    "Koraput": "020",
    "Malkangiri": "021",
    "Mayurbhanj": "022",
    "Nabarangpur": "023",
    "Nayagarh": "024",
    "Nuapada": "025",
    "Puri": "026",
    "Rayagada": "027",
    "Sambalpur": "028",
    "Subarnapur": "029",
    "Sundargarh": "030",
    "Karaikal": "001",
    "Mahe": "002",
    "Puducherry": "003",
    "Yanam": "004",
    "Amritsar": "001",
    "Barnala": "002",
    "Bathinda": "003",
    "Faridkot": "004",
    "Fatehgarh Sahib": "005",
    "Fazilka": "006",
    "Ferozepur": "007",
    "Gurdaspur": "008",
    "Hoshiarpur": "009",
    "Jalandhar": "010",
    "Kapurthala": "011",
    "Ludhiana": "012",
    "Mansa": "013",
    "Moga": "014",
    "Muktsar": "015",
    "Pathankot": "016",
    "Patiala": "017",
    "Rupnagar": "018",
    "Sahibzada Ajit Singh Nagar": "019",
    "Sangrur": "020",
    "Shahid Bhagat Singh Nagar": "021",
    "Sri Muktsar Sahib": "022",
    "Tarn Taran": "023",
    "Ajmer": "001",
    "Alwar": "002",
    "Banswara": "003",
    "Baran": "004",
    "Barmer": "005",
    "Bharatpur": "006",
    "Bhilwara": "007",
    "Bikaner": "008",
    "Bundi": "009",
    "Chittorgarh": "010",
    "Churu": "011",
    "Dausa": "012",
    "Dholpur": "013",
    "Dungarpur": "014",
    "Hanumangarh": "015",
    "Jaipur": "016",
    "Jaisalmer": "017",
    "Jalore": "018",
    "Jhalawar": "019",
    "Jhunjhunu": "020",
    "Jodhpur": "021",
    "Karauli": "022",
    "Kota": "023",
    "Nagaur": "024",
    "Pali": "025",
    "Pratapgarh": "026",
    "Rajsamand": "027",
    "Sawai Madhopur": "028",
    "Sikar": "029",
    "Sirohi": "030",
    "Sri Ganganagar": "031",
    "Tonk": "032",
    "Udaipur": "033",
    "East Sikkim": "001",
    "North Sikkim": "002",
    "South Sikkim": "003",
    "West Sikkim": "004",
    "Ariyalur": "061",
    "Chengalpattu": "019",
    "Chennai": "001",
    "Coimbatore": "038",
    "Cuddalore": "031",
    "Dharmapuri": "030",
    "Dindigul": "057",
    "Erode": "033",
    "Kallakurichi": "095",
    "Kancheepuram": "011",
    "Kanyakumari": "074",
    "Karur": "039",
    "Krishnagiri": "029",
    "Madurai": "058",
    "Nagapattinam": "050",
    "Namakkal": "028",
    "Nilgiris": "043",
    "Perambalur": "062",
    "Pudukkottai": "055",
    "Ramanathapuram": "063",
    "Ranipet": "084",
    "Salem": "030",
    "Sivaganga": "054",
    "Tenkasi": "076",
    "Thanjavur": "049",
    "Theni": "060",
    "Thoothukudi": "069",
    "Tiruchirappalli": "045",
    "Tirunelveli": "072",
    "Tirupathur": "095",
    "Tiruppur": "042",
    "Tiruvallur": "018",
    "Tiruvannamalai": "025",
    "Tiruvarur": "068",
    "Vellore": "025",
    "Viluppuram": "025",
    "Virudhunagar": "025",
    "Adilabad": "001",
    "Bhadradri Kothagudem": "002",
    "Hyderabad": "003",
    "Jagtial": "008",
    "Jangaon": "009",
    "Jayashankar Bhupalpally": "010",
    "Jogulamba Gadwal": "011",
    "Kamareddy": "012",
    "Karimnagar": "013",
    "Khammam": "014",
    "Komaram Bheem Asifabad": "015",
    "Mahabubabad": "016",
    "Mahabubnagar": "017",
    "Mancherial": "018",
    "Medak": "019",
    "Medchal": "020",
    "Malkajgiri": "021",
    "Nagarkurnool": "022",
    "Nalgonda": "023",
    "Nirmal": "024",
    "Nizamabad": "025",
    "Peddapalli": "026",
    "Rajanna Sircilla": "027",
    "Rangareddy": "028",
    "Sangareddy": "029",
    "Siddipet": "030",
    "Suryapet": "031",
    "Vikarabad": "032",
    "Wanaparthy": "033",
    "Warangal Rural": "034",
    "Warangal Urban": "035",
    "Yadadri Bhuvanagiri": "036",
    "Dhalai": "001",
    "Gomati": "002",
    "Khowai": "003",
    "North Tripura": "004",
    "Sepahijala": "005",
    "South Tripura": "006",
    "Unakoti": "007",
    "West Tripura": "008",
    "Agra": "001",
    "Aligarh": "002",
    "Allahabad": "003",
    "Ambedkar Nagar": "004",
    "Amethi": "005",
    "Amroha": "006",
    "Auraiya": "007",
    "Ayodhya": "008",
    "Azamgarh": "009",
    "Baghpat": "010",
    "Bahraich": "011",
    "Ballia": "012",
    "Banda": "013",
    "Barabanki": "014",
    "Bareilly": "015",
    "Basti": "016",
    "Bhadohi": "017",
    "Bijnor": "018",
    "Budaun": "019",
    "Bulandshahr": "020",
    "Chandauli": "021",
    "Chitrakoot": "022",
    "Deoria": "023",
    "Etah": "024",
    "Etawah": "025",
    "Faizabad": "026",
    "Farrukhabad": "027",
    "Fatehpur": "028",
    "Firozabad": "029",
    "Gautam Buddha Nagar": "030",
    "Ghaziabad": "031",
    "Ghazipur": "032",
    "Gonda": "033",
    "Gorakhpur": "034",
    "Hapur": "035",
    "Hardoi": "036",
    "Hathras": "037",
    "Jalaun": "038",
    "Jaunpur": "039",
    "Jhansi": "040",
    "Kannauj": "041",
    "Kanpur Dehat": "042",
    "Kanpur Nagar": "043",
    "Kasganj": "044",
    "Kaushambi": "045",
    "Kushinagar": "046",
    "Lakhimpur Kheri": "047",
    "Lalitpur": "048",
    "Lucknow": "049",
    "Maharajganj": "050",
    "Mahoba": "051",
    "Mainpuri": "052",
    "Mathura": "053",
    "Mau": "054",
    "Meerut": "055",
    "Mirzapur": "056",
    "Moradabad": "057",
    "Muzaffarnagar": "058",
    "Pilibhit": "059",
    "Pratapgarh": "060",
    "Prayagraj (Allahabad)": "061",
    "Raebareli": "062",
    "Rampur": "063",
    "Saharanpur": "064",
    "Sambhal": "065",
    "Sant Kabir Nagar": "066",
    "Shahjahanpur": "067",
    "Shamli": "068",
    "Shrawasti": "069",
    "Siddharthnagar": "070",
    "Sitapur": "071",
    "Sonbhadra": "072",
    "Sultanpur": "073",
    "Unnao": "074",
    "Varanasi": "075",
    "Almora": "001",
    "Bageshwar": "002",
    "Chamoli": "003",
    "Champawat": "004",
    "Dehradun": "005",
    "Haridwar": "006",
    "Nainital": "007",
    "Pauri Garhwal": "008",
    "Pithoragarh": "009",
    "Rudraprayag": "010",
    "Tehri Garhwal": "011",
    "Udham Singh Nagar": "012",
    "Uttarkashi": "013",
    "Alipurduar": "001",
    "Bankura": "002",
    "Birbhum": "003",
    "Cooch Behar": "004",
    "Dakshin Dinajpur": "005",
    "Darjeeling": "006",
    "Hooghly": "007",
    "Howrah": "008",
    "Jalpaiguri": "009",
    "Jhargram": "010",
    "Kalimpong": "011",
    "Kolkata": "012",
    "Maldah": "013",
    "Murshidabad": "014",
    "Nadia": "015",
    "North 24 Parganas": "016",
    "Paschim Bardhaman": "017",
    "Purba Bardhaman": "018",
    "Paschim Medinipur": "019",
    "Purba Medinipur": "020",
    "Purulia": "021",
    "South 24 Parganas": "022",
    "Uttar Dinajpur": "023", 

}  

STATE_CODES = {
    "Andhra Pradesh": "AP",
    "Arunachal Pradesh": "AR",
    "Assam": "AS",
    "Bihar": "BR",
    "Chhattisgarh": "CG",
    "Goa": "GA",
    "Gujarat": "GJ",
    "Haryana": "HR",
    "Himachal Pradesh": "HP",
    "Jammu and Kashmir": "JK",
    "Jharkhand": "JH",
    "Karnataka": "KA",
    "Kerala": "KL",
    "Madhya Pradesh": "MP",
    "Maharashtra": "MH",
    "Manipur": "MN",
    "Meghalaya": "ML",
    "Mizoram": "MZ",
    "Nagaland": "NL",
    "Orissa": "OR",
    "Punjab": "PB",
    "Rajasthan": "RJ",
    "Sikkim": "SK",
    "Tamil Nadu": "TN",
    "Tripura": "TR",
    "Uttarakhand": "UK",
    "Uttar Pradesh": "UP",
    "West Bengal": "WB",
    "Andaman and Nicobar Islands": "AN",
    "Chandigarh": "CH",
    "Dadra and Nagar Haveli": "DH",
    "Daman and Diu": "DD",
    "Delhi": "DL",
    "Lakshadweep": "LD",
    "Pondicherry": "PY"
}


class User_code:
    def __init__(self,profile):
        self.username = profile.user.username
        self.state = profile.state
        self.district = profile.district
        self.pincode = profile.Pincode
        self.storename = profile.MedicalShopName
        self.profile = profile
        # if profile.user.store_type == 'others':
        #     self.storename = profile.user.other_value
        # else:
        #     self.storename = profile.user.store_type
            
        # print(self.state)
        # print(self.storename)

    def display(self):
        return f"IA-{self.convert_state()}-{self.district_name()}-00{self.pincode}-{self.convert_store()}-{self.convert_user_id_to_code()}-{self.format_user_id()}"
    
    def convert_state(self):
        if self.state is not None:
            short_form = STATE_CODES.get(self.state.Pname)
            return '0' + str(short_form)
        else:
            return "State Not Found"


    def convert_store(self):
        words = self.storename.split()
        if len(words) == 2:
            return '0' + ''.join(word[0] for word in words).upper()
        elif len(words) == 3:
            return ''.join(word[0] for word in words).upper()
        elif len(words) > 3:
            return ''.join(word[0] for word in words[:3]).upper()
        elif len(words) == 1:
            return '00' + words[0][0].upper()  # prepend '00' for single-word store names
        else:
            return "Invalid input"


    def district_name(self):
     if self.district is None:
         return "No district"
     else:
         district_name = DISTRICT_CODES.get(self.district.districtname.capitalize())
         if district_name is None:
             return("{self.district.districtname} Not Found.")
         else:
             code = district_name.split(",")[0]
             return code


    def convert_user_id_to_code(self):
            # Get the user's ID
            user_id = self.profile.user.id

            # Map the user ID to a character in the range A-Z
            # If the user ID is greater than 9999, it wraps around to A
            char = chr((user_id // 10000 % 26) + 65)  # 65 is the ASCII value for 'A'

            # Format the character with leading zeros
            return f"000{char}"

    def format_user_id(self):
            # Get the user's ID
            user_id = self.profile.user.id

            # Format the user ID as a four-digit number
            # If the user ID is greater than 9999, it wraps around to 1
            return f"{user_id % 10000:04}"